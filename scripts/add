const fs = require('fs');
const path = require('path');

// Read the migration data
const migrationDataPath = path.join(process.cwd(), 'migration-data.json');
const posts = JSON.parse(fs.readFileSync(migrationDataPath, 'utf8'));

console.log('ðŸ“ Adding featuredImage references to migration data...\n');

// Add image references to each post
const updatedPosts = posts.map(post => {
  const imageUrl = `/images/posts/${post.slug}.webp`;
  const updatedPost = {
    ...post,
    featuredImage: imageUrl
  };
  
  console.log(`âœ… Added image: ${post.slug} â†’ ${imageUrl}`);
  return updatedPost;
});

// Write updated data back to file
fs.writeFileSync(migrationDataPath, JSON.stringify(updatedPosts, null, 2));

console.log('\nðŸŽ‰ Migration data updated!');
console.log('ðŸ“„ All posts now include featuredImage URLs');
console.log('ðŸš€ Ready to import to Contentful');
